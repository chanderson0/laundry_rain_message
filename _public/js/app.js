var CLOTHING_ASSETS, CLOTH_ROTATION_MAX, CLOTH_VY, CLOTH_X, CLOTH_Y, ClothGenerator, ClothLaundry, FPS, NOISE_DATA, NOISE_DELAY, RANDOM_CLOTH_DENSITY, Y_BOX_MAX, Y_BOX_MIN, Z_BOX_MIN, Z_PLANES, Z_PLANE_INCREMENT, Z_PLANE_MIN_DEPTH, camera, mouse, renderer, s, scene, stats,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

FPS = 60;

CLOTH_X = 200;

CLOTH_Y = 200;

CLOTH_VY = -10;

CLOTH_ROTATION_MAX = 0.02;

CLOTHING_ASSETS = ['assets/shirt.png', 'assets/boxers.png', 'assets/pants.png'];

Y_BOX_MAX = 4000;

Y_BOX_MIN = -4000;

Z_BOX_MIN = 4000;

Z_PLANES = 10;

Z_PLANE_INCREMENT = 100;

Z_PLANE_MIN_DEPTH = 2000;

RANDOM_CLOTH_DENSITY = 1000;

NOISE_DATA = [
  {
    "x": -0.6189011892925407,
    "y": -0.20134918343540137,
    "z": -0.7592231715524597
  }, {
    "x": -0.6197119550185158,
    "y": -0.19500269180777816,
    "z": -0.7602177602469239
  }, {
    "x": -0.6214480257932258,
    "y": -0.18063422304093119,
    "z": -0.7623474461845474
  }, {
    "x": -0.623568282938027,
    "y": -0.16129632639800082,
    "z": -0.7649484241465109
  }, {
    "x": -0.6238995946158898,
    "y": -0.15805456123676973,
    "z": -0.765354853326469
  }, {
    "x": -0.6250086609460062,
    "y": -0.1466686965662561,
    "z": -0.7667153756055998
  }, {
    "x": -0.6267241019568677,
    "y": -0.12701608246729057,
    "z": -0.7688197544424964
  }, {
    "x": -0.6296496820013956,
    "y": -0.10047601134820963,
    "z": -0.7703543659246023
  }, {
    "x": -0.6367018945471162,
    "y": -0.06016080789347181,
    "z": -0.76875963387376
  }, {
    "x": -0.637253825279035,
    "y": -0.04348713693123911,
    "z": -0.769426040038132
  }, {
    "x": -0.6374634002687319,
    "y": -0.0351357773601091,
    "z": -0.7696790827787432
  }, {
    "x": -0.6378492015553834,
    "y": -0.005022434571084075,
    "z": -0.7701449027463203
  }, {
    "x": -0.639814598771457,
    "y": 0.00835267085782989,
    "z": -0.7684839048987693
  }, {
    "x": -0.6405001206742754,
    "y": 0.03169141167295301,
    "z": -0.7673038836356911
  }, {
    "x": -0.641814366771262,
    "y": 0.05487013921573832,
    "z": -0.7648944936580793
  }, {
    "x": -0.6412897856152084,
    "y": 0.06811627138769083,
    "z": -0.7642693140757638
  }, {
    "x": -0.6395981289014095,
    "y": 0.09941939655597883,
    "z": -0.7622532499729083
  }, {
    "x": -0.6421068792625814,
    "y": 0.1185428064297715,
    "z": -0.7573944538002786
  }, {
    "x": -0.6413607562687698,
    "y": 0.1488873158454384,
    "z": -0.7526546003969499
  }, {
    "x": -0.636570833258935,
    "y": 0.19162080873952217,
    "z": -0.7470334931594679
  }, {
    "x": -0.635561832292484,
    "y": 0.19942373474599875,
    "z": -0.7458494025961124
  }, {
    "x": -0.635207493033005,
    "y": 0.22192058866590797,
    "z": -0.7397720548391252
  }, {
    "x": -0.6311063334205345,
    "y": 0.2533987507045327,
    "z": -0.7331397336510084
  }, {
    "x": -0.6305940171692208,
    "y": 0.2563778661842886,
    "z": -0.7325445892511772
  }, {
    "x": -0.6215842781648726,
    "y": 0.260198065430944,
    "z": -0.7388707274511885
  }, {
    "x": -0.621114401514274,
    "y": 0.25745674229052495,
    "z": -0.7402249158740305
  }, {
    "x": -0.616654814198036,
    "y": 0.24990747301226376,
    "z": -0.7465139617307972
  }, {
    "x": -0.6145686134596163,
    "y": 0.23863568088782677,
    "z": -0.7519032059763597
  }, {
    "x": -0.6093399892050583,
    "y": 0.22022341620419078,
    "z": -0.7617128228610408
  }, {
    "x": -0.6030704202919386,
    "y": 0.2138310594537011,
    "z": -0.768493556369741
  }, {
    "x": -0.4510637580295393,
    "y": -0.17319325430816102,
    "z": -0.8755258893113428
  }, {
    "x": -0.4583643679682783,
    "y": -0.10739918059600491,
    "z": -0.8822513939826606
  }, {
    "x": -0.4684509355331308,
    "y": 0.023038570201678606,
    "z": -0.8831890767447232
  }, {
    "x": -0.4729020263255878,
    "y": 0.17639995915105383,
    "z": -0.8632767388900615
  }, {
    "x": -0.46333776234363055,
    "y": 0.29435574981157314,
    "z": -0.8358665028216312
  }, {
    "x": -0.5862896480175658,
    "y": 0.19486011288181979,
    "z": -0.7863167205618379
  }, {
    "x": -0.563067868229416,
    "y": 0.10512975838981337,
    "z": -0.8196964741100699
  }, {
    "x": -0.5475234480929069,
    "y": 0.0018190147462685726,
    "z": -0.8367883633116601
  }, {
    "x": -0.50984971006688,
    "y": -0.08559520531970256,
    "z": -0.85599458758277
  }, {
    "x": -0.48550234143207127,
    "y": -0.1624565499012678,
    "z": -0.8590083502842994
  }, {
    "x": -0.45898566285036096,
    "y": -0.20127649621272767,
    "z": -0.8653438237892166
  }, {
    "x": -0.4556934300583503,
    "y": -0.21940794401255098,
    "z": -0.8626723896739947
  }, {
    "x": -0.20497521691160395,
    "y": 0.3462688070485311,
    "z": -0.9154687726608857
  }, {
    "x": -0.23142875149928588,
    "y": 0.34417608602287214,
    "z": -0.9099360168657236
  }, {
    "x": -0.328844225324612,
    "y": 0.20251991575344563,
    "z": -0.9224137678904587
  }, {
    "x": -0.33753200370099645,
    "y": 0.02250213319102937,
    "z": -0.9410450576244709
  }, {
    "x": -0.31051136777032856,
    "y": -0.14299865373773069,
    "z": -0.9397521351476655
  }, {
    "x": -0.22497526754319172,
    "y": -0.21878328392003182,
    "z": -0.949484072363005
  }, {
    "x": -0.11662859392843122,
    "y": -0.1866057470592825,
    "z": -0.9754876043511391
  }, {
    "x": -0.069346963377248,
    "y": -0.03684057365723014,
    "z": -0.9969121178935287
  }, {
    "x": -0.06052656782747663,
    "y": 0.08646652397291293,
    "z": -0.994414438158994
  }, {
    "x": -0.06802446526412109,
    "y": 0.1976960987559043,
    "z": -0.9779002631466188
  }, {
    "x": -0.13216653190156658,
    "y": 0.28291897746043393,
    "z": -0.949994136843936
  }, {
    "x": 0.022262371036291976,
    "y": 0.36429333793200397,
    "z": -0.9310181259106619
  }, {
    "x": 0.029435091806490798,
    "y": 0.25230078255077604,
    "z": -0.967201060015243
  }, {
    "x": 0.038654296698781315,
    "y": 0.1503222623407988,
    "z": -0.9878810974967923
  }, {
    "x": 0.047698891598491625,
    "y": 0.05420328497026176,
    "z": -0.9973900037792178
  }, {
    "x": 0.04772413667450183,
    "y": -0.043385578044912707,
    "z": -0.9979178815896537
  }, {
    "x": 0.051525638763268246,
    "y": -0.14813620888328466,
    "z": -0.9876238009321794
  }, {
    "x": 0.052957661016327505,
    "y": -0.21818555961508204,
    "z": -0.9744693672533443
  }, {
    "x": 0.3419949378873515,
    "y": 0.3571107300729628,
    "z": -0.869201581295261
  }, {
    "x": 0.2657989369084218,
    "y": 0.34788389670384684,
    "z": -0.8990704752979601
  }, {
    "x": 0.21308652871981956,
    "y": 0.28817415766744764,
    "z": -0.9335683082296627
  }, {
    "x": 0.19196307907537,
    "y": 0.2044824067841405,
    "z": -0.9598630743953371
  }, {
    "x": 0.23275861526566116,
    "y": 0.1237185411103582,
    "z": -0.964633168414365
  }, {
    "x": 0.3006298722256092,
    "y": 0.11119186862681323,
    "z": -0.9472370602319631
  }, {
    "x": 0.3542698681992369,
    "y": 0.08502476689783245,
    "z": -0.9312699122703709
  }, {
    "x": 0.35897466211768414,
    "y": 0.02636537020818252,
    "z": -0.9329748438255342
  }, {
    "x": 0.30578641428338693,
    "y": -0.055785358398042384,
    "z": -0.9504644457464524
  }, {
    "x": 0.24434513730665033,
    "y": -0.1315704562750267,
    "z": -0.9607209110403371
  }, {
    "x": 0.2164314709018473,
    "y": -0.19145860556460295,
    "z": -0.9573405980937614
  }, {
    "x": 0.4273190244895186,
    "y": 0.3341853851692345,
    "z": -0.840070580158963
  }, {
    "x": 0.4545147330077245,
    "y": 0.14704888166606847,
    "z": -0.8785174920738205
  }, {
    "x": 0.4721674391747232,
    "y": -0.06117148903792314,
    "z": -0.879383851518816
  }, {
    "x": 0.46786175261931634,
    "y": -0.14774581406226397,
    "z": -0.8713647656768435
  }, {
    "x": 0.5653123230406951,
    "y": -0.1258218628274668,
    "z": -0.8152244085237872
  }, {
    "x": 0.6464395294300224,
    "y": -0.11156824172908163,
    "z": -0.7547638453369188
  }, {
    "x": 0.5251880738361856,
    "y": 0.10283402666556206,
    "z": -0.8447500518259727
  }, {
    "x": 0.600839762062694,
    "y": 0.10846104399860969,
    "z": -0.7919771349345742
  }, {
    "x": 0.648576633459778,
    "y": 0.10809610370776727,
    "z": -0.7534345246225317
  }, {
    "x": 0.47767812383943015,
    "y": 0.3154814420067902,
    "z": -0.8199360156466836
  }, {
    "x": 0.5467289503341154,
    "y": 0.31386291050620424,
    "z": -0.7762586735587119
  }, {
    "x": 0.5948139282103841,
    "y": 0.3054886698047493,
    "z": -0.7435543446365281
  }, {
    "x": 0.4321240187197626,
    "y": 0.3126003485629726,
    "z": -0.8459017995747439
  }, {
    "x": 0.43509195932311606,
    "y": 0.30235203430228996,
    "z": -0.8481027262576384
  }, {
    "x": 0.4408035704148886,
    "y": 0.2596258272387691,
    "z": -0.8592360805623046
  }, {
    "x": 0.4420638323737442,
    "y": 0.24912918936108536,
    "z": -0.861692645387743
  }, {
    "x": 0.4478242683545389,
    "y": 0.19355116348491297,
    "z": -0.8729211715764251
  }, {
    "x": 0.44610880444166146,
    "y": 0.21171264929508668,
    "z": -0.869577304630294
  }, {
    "x": 0.4436732818584881,
    "y": 0.2349964375995057,
    "z": -0.8648298637769515
  }, {
    "x": 0.45232892768368144,
    "y": 0.13416535758660564,
    "z": -0.8817018759218953
  }, {
    "x": 0.4534128829324052,
    "y": 0.11527445976950769,
    "z": -0.8838147750042274
  }, {
    "x": 0.45473663539125164,
    "y": 0.08670825524924183,
    "z": -0.8863950986465777
  }, {
    "x": 0.45495712193818266,
    "y": 0.08096694402984744,
    "z": -0.8868248819085948
  }, {
    "x": 0.455964783778422,
    "y": 0.04636929924358922,
    "z": -0.8887890661127393
  }, {
    "x": 0.45600478699336344,
    "y": 0.04444114372677761,
    "z": -0.8888670423541383
  }, {
    "x": 0.45949625924583254,
    "y": 0.0077226260722966095,
    "z": -0.8881461303105666
  }, {
    "x": 0.45950910535140194,
    "y": 0.0019307104933067418,
    "z": -0.8881709601513356
  }, {
    "x": 0.45947913278088287,
    "y": -0.011583507348831875,
    "z": -0.8881130270953285
  }, {
    "x": 0.45926264820358625,
    "y": -0.0328044743045316,
    "z": -0.8876945907408879
  }, {
    "x": 0.45923272383132024,
    "y": -0.03473188607584235,
    "z": -0.8876367508457956
  }, {
    "x": 0.4591677653301996,
    "y": -0.03858552583123484,
    "z": -0.8875111945648898
  }, {
    "x": 0.45868912022282365,
    "y": -0.059745220508699404,
    "z": -0.8865860362173426
  }, {
    "x": 0.45846439280345624,
    "y": -0.06742123307016368,
    "z": -0.8861516675280012
  }, {
    "x": 0.16836881592014605,
    "y": -0.18520569431015851,
    "z": -0.9681687831265477
  }, {
    "x": 0.2088028416222546,
    "y": -0.18374649745080984,
    "z": -0.9605407841445521
  }, {
    "x": 0.23667297511797183,
    "y": -0.17854276761622404,
    "z": -0.9550436550130822
  }, {
    "x": 0.24262842299591203,
    "y": -0.17626850938543942,
    "z": -0.953971100690976
  }, {
    "x": 0.256669360866807,
    "y": -0.1655931331801787,
    "z": -0.9522078310094895
  }, {
    "x": 0.27895776030130737,
    "y": -0.13637934712279065,
    "z": -0.9505699562084001
  }, {
    "x": 0.29441447552576866,
    "y": -0.1276482319371425,
    "z": -0.947114589415773
  }, {
    "x": 0.29839748362072,
    "y": -0.1214169050292665,
    "z": -0.9466873174084124
  }, {
    "x": 0.31372553945530657,
    "y": -0.10867616538340474,
    "z": -0.9432739670801031
  }, {
    "x": 0.3472175891306695,
    "y": -0.0832509994633572,
    "z": -0.9340820182867442
  }, {
    "x": 0.3494275123750898,
    "y": -0.06704132388963853,
    "z": -0.9345618623111479
  }, {
    "x": 0.35339437275099317,
    "y": -0.04671304846406588,
    "z": -0.9343073950318095
  }, {
    "x": 0.3537447509919726,
    "y": 0.014231110426050665,
    "z": -0.9352337283490523
  }, {
    "x": 0.3533244219561013,
    "y": 0.0507650022769414,
    "z": -0.9341224584567106
  }, {
    "x": 0.35272933819224006,
    "y": 0.07703284264120508,
    "z": -0.932549170356759
  }, {
    "x": 0.310916847155299,
    "y": 0.07824397342805176,
    "z": -0.9472109557945362
  }, {
    "x": 0.3034483815385945,
    "y": 0.07844243740889567,
    "z": -0.949613533894162
  }, {
    "x": 0.28834325613200484,
    "y": 0.07882765139266897,
    "z": -0.9542768822616992
  }, {
    "x": 0.24326570148643492,
    "y": 0.10066166784026452,
    "z": -0.9647222538678835
  }, {
    "x": 0.24123967743326766,
    "y": 0.10278907817271725,
    "z": -0.9650066442467098
  }, {
    "x": 0.2269117769038464,
    "y": 0.11975899129541807,
    "z": -0.9665240967023238
  }, {
    "x": 0.2100441642283851,
    "y": 0.1491313540238369,
    "z": -0.9662511517822974
  }, {
    "x": 0.20796941504122754,
    "y": 0.15125048105139338,
    "z": -0.9663705367969017
  }, {
    "x": 0.19244123839574098,
    "y": 0.19244123506864422,
    "z": -0.9622539897604834
  }, {
    "x": 0.186745696675375,
    "y": 0.2323946407337309,
    "z": -0.9545254191122775
  }, {
    "x": 0.183625012528299,
    "y": 0.2558370916837024,
    "z": -0.9491202438536475
  }, {
    "x": 0.17895362901259376,
    "y": 0.2694589079924995,
    "z": -0.9462386039296393
  }, {
    "x": 0.17652251707685282,
    "y": 0.3124651397683433,
    "z": -0.9333838103344209
  }, {
    "x": 0.17904218615956444,
    "y": 0.3339438470634197,
    "z": -0.9254325489108797
  }, {
    "x": 0.2111159987365659,
    "y": 0.3405739166019729,
    "z": -0.9162092787173979
  }, {
    "x": 0.22060009192892607,
    "y": 0.3398433789879634,
    "z": -0.9142439921590916
  }, {
    "x": 0.2468182765218753,
    "y": 0.33764739644437425,
    "z": -0.9083363771473136
  }, {
    "x": 0.26121700983476187,
    "y": 0.33977851067758796,
    "z": -0.9035022066684211
  }, {
    "x": 0.29723645617819666,
    "y": 0.33609088908365997,
    "z": -0.8936964828137022
  }, {
    "x": 0.30253584991575827,
    "y": 0.33550449442658836,
    "z": -0.8921372056669922
  }, {
    "x": 0.3093573984818623,
    "y": 0.3364261650325881,
    "z": -0.8894467018804444
  }, {
    "x": 0.3215190788113019,
    "y": 0.3349959206344369,
    "z": -0.8856654081077221
  }, {
    "x": 0.32989804110602594,
    "y": 0.3356520709036583,
    "z": -0.8823292864755724
  }, {
    "x": 0.3573185912862851,
    "y": -0.008120876934287275,
    "z": -0.9339472552981797
  }, {
    "x": 0.3569744556985637,
    "y": -0.04462180619085863,
    "z": -0.9330477653319682
  }, {
    "x": 0.35675437823840217,
    "y": -0.056756377374854304,
    "z": -0.9324725343059783
  }, {
    "x": 0.05499237832431252,
    "y": -0.22419969236910817,
    "z": -0.9729904091345573
  }, {
    "x": 0.05524254984740591,
    "y": -0.2039724882178081,
    "z": -0.9774167405649409
  }, {
    "x": 0.0556172924953973,
    "y": -0.16899100119896188,
    "z": -0.9840471321482798
  }, {
    "x": 0.055657036602367704,
    "y": -0.1648304517034288,
    "z": -0.9847503320476143
  }, {
    "x": 0.04518156122889741,
    "y": -0.1355446813432746,
    "z": -0.9897405043163937
  }, {
    "x": 0.04537658853665589,
    "y": -0.09939633507612697,
    "z": -0.9940127432715384
  }, {
    "x": 0.045386231416107196,
    "y": -0.09725620849592026,
    "z": -0.994223978742638
  }, {
    "x": 0.04551835145552627,
    "y": -0.06069113422475251,
    "z": -0.997118180511861
  }, {
    "x": 0.04556364947915004,
    "y": -0.04122425357793778,
    "z": -0.9981104722239333
  }, {
    "x": 0.04334317522200908,
    "y": -0.0650147617089802,
    "z": -0.996942550963494
  }, {
    "x": 0.04342032814051042,
    "y": -0.026052196433892512,
    "z": -0.998717156238512
  }, {
    "x": 0.043417770197103,
    "y": 0.028221550140197522,
    "z": -0.9986583206176155
  }, {
    "x": 0.04342677616359179,
    "y": 0.019542048935755882,
    "z": -0.9988654681364404
  }, {
    "x": 0.04319120305454192,
    "y": 0.10581844565414372,
    "z": -0.9934470174790615
  }, {
    "x": 0.042982432781837145,
    "y": 0.1439911473297066,
    "z": -0.9886450626806517
  }, {
    "x": 0.04279398965923519,
    "y": 0.17117595567749763,
    "z": -0.9843106555589759
  }, {
    "x": 0.04276228518884806,
    "y": 0.1753253662430952,
    "z": -0.9835814165167784
  }, {
    "x": 0.04240706089597097,
    "y": 0.21627600683027876,
    "z": -0.9754108519263637
  }, {
    "x": 0.0423875319724833,
    "y": 0.21829578588419613,
    "z": -0.9749616643737757
  }, {
    "x": 0.042097332106004436,
    "y": 0.2462693885624003,
    "z": -0.9682867358828469
  }, {
    "x": 0.04205338449935567,
    "y": 0.2502176334451798,
    "z": -0.9672758907184872
  }, {
    "x": 0.04198633253588838,
    "y": 0.2561166240409457,
    "z": -0.9657336189498917
  }, {
    "x": 0.04153151059143663,
    "y": 0.2927971446074891,
    "z": -0.9552721945800026
  }, {
    "x": 0.04150619241935001,
    "y": 0.29469396108245216,
    "z": -0.9546898476952513
  }, {
    "x": 0.04135153693828394,
    "y": 0.3060013680528756,
    "z": -0.9511325949322788
  }, {
    "x": 0.04116533486025337,
    "y": 0.31903133965126435,
    "z": -0.9468497343962045
  }, {
    "x": 0.04077541691699295,
    "y": 0.34455226699166247,
    "z": -0.9378811762084532
  }, {
    "x": -0.22527352791666336,
    "y": 0.32893921649220254,
    "z": -0.9170882342901779
  }, {
    "x": -0.23845691984326728,
    "y": 0.3278782591158391,
    "z": -0.9141302667443127
  }, {
    "x": -0.26576317114508796,
    "y": 0.3113792324507669,
    "z": -0.9123666535232852
  }, {
    "x": -0.2710658780316847,
    "y": 0.2929903189834739,
    "z": -0.9168860140436618
  }, {
    "x": -0.279227595389231,
    "y": 0.2832165561411467,
    "z": -0.9175076742462138
  }, {
    "x": -0.2816399636244992,
    "y": 0.25347596287972946,
    "z": -0.9254344207623707
  }, {
    "x": -0.2898863269160515,
    "y": 0.24157193492019738,
    "z": -0.9260717670494184
  }, {
    "x": -0.2920100944489096,
    "y": 0.23763579689134148,
    "z": -0.9264228693074
  }, {
    "x": -0.3239816862397496,
    "y": 0.19519393181323588,
    "z": -0.9257079431249029
  }, {
    "x": -0.3249621930634381,
    "y": 0.17963748250076292,
    "z": -0.9285095303550679
  }, {
    "x": -0.3271668339887344,
    "y": 0.1381822628981484,
    "z": -0.9348088173301186
  }, {
    "x": -0.32794167569367144,
    "y": 0.12017738218267934,
    "z": -0.9370227607454075
  }, {
    "x": -0.3283267290271751,
    "y": 0.11012200658969866,
    "z": -0.9381229677771323
  }, {
    "x": -0.3289978379491448,
    "y": 0.08991245105273257,
    "z": -0.9400405170898104
  }, {
    "x": -0.3299360281320289,
    "y": 0.049183009554454496,
    "z": -0.9427211936259987
  }, {
    "x": -0.33002959583018426,
    "y": 0.043047337842304814,
    "z": -0.9429885431864249
  }, {
    "x": -0.33032954827478633,
    "y": -0.006155208867647598,
    "z": -0.9438455927429928
  }, {
    "x": -0.330279499402748,
    "y": -0.018462828839957802,
    "z": -0.9437025888623473
  }, {
    "x": -0.33011075225978675,
    "y": -0.036906791540035094,
    "z": -0.9432204302180366
  }, {
    "x": -0.33002959583018426,
    "y": -0.043047337842304814,
    "z": -0.9429885431864249
  }, {
    "x": -0.32587850329442514,
    "y": -0.06968471019152032,
    "z": -0.9428399876204389
  }, {
    "x": -0.32185174215795637,
    "y": -0.08405045350530753,
    "z": -0.9430519483758254
  }, {
    "x": -0.31805662172670485,
    "y": -0.08823506127611515,
    "z": -0.9439568630702337
  }, {
    "x": -0.287760803802685,
    "y": -0.15210213652316956,
    "z": -0.9455467518107817
  }, {
    "x": -0.2875786167569972,
    "y": -0.15611410354047212,
    "z": -0.9449481074957964
  }, {
    "x": -0.2872007734729765,
    "y": -0.16411472486148113,
    "z": -0.9437065607487132
  }, {
    "x": -0.27375643511460007,
    "y": -0.1687821600849292,
    "z": -0.9468738018714061
  }, {
    "x": -0.2698473778509338,
    "y": -0.17097199980459804,
    "z": -0.9476027479644579
  }, {
    "x": -0.2618996404171166,
    "y": -0.17734935973596727,
    "z": -0.9486599933330317
  }, {
    "x": -0.24058675133417745,
    "y": -0.17836603669848308,
    "z": -0.9540983031296839
  }, {
    "x": -0.21184542018060942,
    "y": -0.20561466897338782,
    "z": -0.9554287654511272
  }, {
    "x": -0.21003821739043618,
    "y": -0.20171986865973668,
    "z": -0.9566572227414302
  }, {
    "x": -0.18001521362011033,
    "y": -0.20094721172968838,
    "z": -0.962919903711295
  }, {
    "x": -0.1759599263907353,
    "y": -0.20109705525552257,
    "z": -0.9636379396184671
  }, {
    "x": -0.17189566082227475,
    "y": -0.20124369699557668,
    "z": -0.9643406328730664
  }, {
    "x": -0.15200091742014896,
    "y": -0.18366777204060017,
    "z": -0.971165212833056
  }, {
    "x": -0.1319026465035785,
    "y": -0.1574321882663132,
    "z": -0.9786811523387137
  }, {
    "x": -0.12376644130892646,
    "y": -0.1451054804052001,
    "z": -0.981644674799441
  }, {
    "x": -0.11766488762247894,
    "y": -0.1326404164812244,
    "z": -0.9841552185181343
  }, {
    "x": -0.10960115390969667,
    "y": -0.10315402542570691,
    "z": -0.9886085343047245
  }, {
    "x": -0.10962520537606768,
    "y": -0.10102714830580654,
    "z": -0.988825479875722
  }, {
    "x": -0.10136610172857434,
    "y": -0.07332866806779258,
    "z": -0.9921430440514895
  }, {
    "x": -0.09298084687796263,
    "y": -0.04324690477694244,
    "z": -0.9947282379328893
  }, {
    "x": -0.09301891121250043,
    "y": -0.03244845683871142,
    "z": -0.9951354580184686
  }, {
    "x": -0.09306704789125218,
    "y": -0.004328699827080339,
    "z": -0.9956504341156162
  }, {
    "x": -0.09293197561279014,
    "y": 0.05403021744540634,
    "z": -0.9942054030790147
  }, {
    "x": -0.08414420182788705,
    "y": 0.08845928757174852,
    "z": -0.9925193739877557
  }, {
    "x": -0.0841113190872246,
    "y": 0.09273811944154886,
    "z": -0.9921315070109669
  }, {
    "x": -0.08357368410744269,
    "y": 0.1457182159244389,
    "z": -0.9857898563449049
  }, {
    "x": -0.08139358788344067,
    "y": 0.1499355540351704,
    "z": -0.9853397452085382
  }, {
    "x": -0.08089978265816566,
    "y": 0.18521792025200795,
    "z": -0.9793618060672891
  }, {
    "x": -0.08086771814491078,
    "y": 0.1872726072031093,
    "z": -0.9789736374149127
  }, {
    "x": -0.07984161992217147,
    "y": 0.24372704607496232,
    "z": -0.9665518313777987
  }, {
    "x": -0.09589140548513593,
    "y": 0.2668282541280814,
    "z": -0.9589616890955788
  }, {
    "x": -0.11132884259831624,
    "y": 0.2968769084628357,
    "z": -0.9484039171298633
  }, {
    "x": -0.13112743866819027,
    "y": 0.30732992906517553,
    "z": -0.9425252832307015
  }, {
    "x": -0.14671590050098543,
    "y": 0.31584672478453546,
    "z": -0.93739814965844
  }, {
    "x": -0.1637279264818549,
    "y": 0.32947717969311463,
    "z": -0.9298591044622961
  }, {
    "x": -0.1752611522351164,
    "y": 0.3323918346992223,
    "z": -0.926714193666259
  }, {
    "x": -0.4697804992576334,
    "y": 0.26870712917097306,
    "z": -0.8408940249817113
  }, {
    "x": -0.4745502156326367,
    "y": 0.2047079326160807,
    "z": -0.8560938938966148
  }, {
    "x": -0.47227889378485555,
    "y": 0.22595303547294238,
    "z": -0.8519964038925966
  }, {
    "x": -0.47002310792312196,
    "y": 0.24514930303134574,
    "z": -0.8479269409810817
  }, {
    "x": -0.4657196084006354,
    "y": 0.2676970931139101,
    "z": -0.8434711095760905
  }, {
    "x": -0.4758481150806774,
    "y": 0.15798909476568473,
    "z": -0.8652213689624674
  }, {
    "x": -0.47718353025333093,
    "y": 0.13957146493378741,
    "z": -0.8676495171618579
  }, {
    "x": -0.4774315616397482,
    "y": 0.1358698491848016,
    "z": -0.8681005057208128
  }, {
    "x": -0.47767316904035184,
    "y": 0.1321625346036904,
    "z": -0.8685398137253559
  }, {
    "x": -0.47898627759983337,
    "y": 0.10980712893471928,
    "z": -0.8709274024315513
  }, {
    "x": -0.47964259604199266,
    "y": 0.09668684575187578,
    "z": -0.8721207679677457
  }, {
    "x": -0.4797033300387923,
    "y": 0.05520395369290589,
    "z": -0.8756924338181556
  }, {
    "x": -0.4738586620150843,
    "y": 0.09515234012501823,
    "z": -0.8754450300287319
  }, {
    "x": -0.4760150105827139,
    "y": -0.0038234136735176547,
    "z": -0.8794288437433808
  }, {
    "x": -0.46852001813967653,
    "y": -0.015361311804573162,
    "z": -0.8833193209151716
  }, {
    "x": -0.46838102051848113,
    "y": -0.028793914697993223,
    "z": -0.8830572632023536
  }, {
    "x": -0.46799231218441273,
    "y": -0.049868032403388884,
    "z": -0.8823244160060979
  }, {
    "x": -0.4678993725708141,
    "y": -0.05369336969458122,
    "z": -0.88214919327667
  }, {
    "x": -0.4669114496689671,
    "y": -0.08419714520594124,
    "z": -0.8802866231558861
  }, {
    "x": -0.46683538591074314,
    "y": -0.08609668853600548,
    "z": -0.8801432171440632
  }, {
    "x": -0.46579305253301545,
    "y": -0.10881230957114,
    "z": -0.8781780648010801
  }, {
    "x": -0.4656954792949765,
    "y": -0.11069810382020372,
    "z": -0.8779941061162276
  }, {
    "x": -0.4612863661698454,
    "y": -0.1353360802967961,
    "z": -0.8768688805948802
  }, {
    "x": -0.4604147942997512,
    "y": -0.14839815427477523,
    "z": -0.8752120914371314
  }, {
    "x": -0.45844432793136747,
    "y": -0.17428461752270297,
    "z": -0.871466390793427
  }, {
    "x": -0.45750940925903716,
    "y": -0.1852724021992646,
    "z": -0.8696891843772467
  }, {
    "x": -0.48478941522930064,
    "y": -0.13341103831858803,
    "z": -0.8643961578676693
  }, {
    "x": -0.49719971596423856,
    "y": -0.11588865359710022,
    "z": -0.8598617693632692
  }, {
    "x": -0.509598336864189,
    "y": -0.09113254771764959,
    "z": -0.8555725532131935
  }, {
    "x": -0.5114608385398842,
    "y": -0.07997387518903096,
    "z": -0.8555769924018106
  }, {
    "x": -0.5288815316955988,
    "y": -0.04054144075310124,
    "z": -0.8477267938510495
  }, {
    "x": -0.5383116644042708,
    "y": -0.027464880362115095,
    "z": -0.8422981849161248
  }, {
    "x": -0.5487952533414667,
    "y": -0.0018172027942165245,
    "z": -0.8359548239491654
  }, {
    "x": -0.5487735076826014,
    "y": 0.009085653943624402,
    "z": -0.8359216997770489
  }, {
    "x": -0.5546596605630947,
    "y": 0.03974759713817623,
    "z": -0.8311274207158453
  }, {
    "x": -0.5579068723009261,
    "y": 0.05759038582248589,
    "z": -0.827902934709266
  }, {
    "x": -0.5590252820639718,
    "y": 0.06111530309185664,
    "z": -0.8268951890906653
  }, {
    "x": -0.5642829676027123,
    "y": 0.10502427291156485,
    "z": -0.8188740040890744
  }, {
    "x": -0.5730128326946627,
    "y": 0.13358581144748666,
    "z": -0.8085858795125939
  }, {
    "x": -0.5742370990789198,
    "y": 0.14706071795330336,
    "z": -0.8053725220520537
  }, {
    "x": -0.5975339698992833,
    "y": 0.19127857629249173,
    "z": -0.7786948446393617
  }, {
    "x": -0.5984264737155515,
    "y": 0.19271360684777872,
    "z": -0.7776549500209524
  }, {
    "x": -0.5978347967967577,
    "y": 0.19758946332180755,
    "z": -0.7768860661147035
  }, {
    "x": -0.6144031794641511,
    "y": 0.22670491256729444,
    "z": -0.7557205936602479
  }, {
    "x": -0.6158986581424588,
    "y": 0.254463388569993,
    "z": -0.7455985694566449
  }, {
    "x": -0.6377322938530257,
    "y": 0.18220922366495376,
    "z": -0.7483964993159526
  }, {
    "x": -0.6422691850127474,
    "y": 0.1392675504648798,
    "z": -0.7537206666733859
  }, {
    "x": 0.47817074546064253,
    "y": -0.1650157838158299,
    "z": -0.8626253701794662
  }, {
    "x": 0.482492521135134,
    "y": -0.16457108963494813,
    "z": -0.8603007169037047
  }, {
    "x": 0.5166975924624502,
    "y": -0.1502453966290928,
    "z": -0.8428819126872247
  }, {
    "x": 0.5180387764405273,
    "y": -0.15010310577280964,
    "z": -0.8420836560231756
  }, {
    "x": 0.5453311583675573,
    "y": -0.1470959020165442,
    "z": -0.8252131381185333
  }, {
    "x": 0.5490956974335734,
    "y": -0.14666399482444897,
    "z": -0.8227901237144691
  }, {
    "x": 0.5699510250049243,
    "y": -0.14248775378777498,
    "z": -0.8092299235176308
  }, {
    "x": 0.5890592679473274,
    "y": -0.13340459661106466,
    "z": -0.7970021282583867
  }, {
    "x": 0.591315062645682,
    "y": -0.13313233636412944,
    "z": -0.7953755576471793
  }, {
    "x": 0.6174605824063932,
    "y": -0.12821585642505404,
    "z": -0.776081905043242
  }, {
    "x": 0.6205774890535235,
    "y": -0.12781541558985415,
    "z": -0.7736580637578961
  }, {
    "x": 0.6328877259441462,
    "y": -0.12458419586657796,
    "z": -0.7641543721588758
  }, {
    "x": 0.6426897305135324,
    "y": -0.12327807916920777,
    "z": -0.7561431250026633
  }, {
    "x": 0.6037452441175785,
    "y": -0.12827448307637881,
    "z": -0.7867892584402089
  }, {
    "x": 0.6006010777814066,
    "y": -0.12698422567836587,
    "z": -0.7894006281962781
  }, {
    "x": 0.5972947687761573,
    "y": -0.12737698018809693,
    "z": -0.7918421964702298
  }, {
    "x": 0.5732785691359891,
    "y": -0.13013071589761657,
    "z": -0.8089608636697864
  }, {
    "x": 0.5673308540985545,
    "y": -0.1307865497740256,
    "z": -0.8130378714340499
  }, {
    "x": 0.5058304267276195,
    "y": -0.15137990611151214,
    "z": -0.8492465504329261
  }, {
    "x": 0.46824747800050903,
    "y": -0.14218040584160735,
    "z": -0.8720831563221931
  }, {
    "x": 0.46920624490220836,
    "y": -0.12727456625481795,
    "z": -0.873868802812766
  }, {
    "x": 0.4708992091193821,
    "y": -0.09532372489434301,
    "z": -0.877021848258644
  }, {
    "x": 0.4714573097294604,
    "y": -0.08207556262297493,
    "z": -0.8780612775443303
  }, {
    "x": 0.4727404564809576,
    "y": -0.03636464986983048,
    "z": -0.8804510622663934
  }, {
    "x": 0.47981507907942544,
    "y": 0.09292861054708955,
    "z": -0.8724343890687667
  }, {
    "x": 0.48850274231082,
    "y": 0.0924194361366494,
    "z": -0.8676541468690115
  }, {
    "x": 0.5026649984074916,
    "y": 0.09156351113803517,
    "z": -0.8596185333065308
  }, {
    "x": 0.5244200606578538,
    "y": 0.09200351782301917,
    "z": -0.8464744253004945
  }, {
    "x": 0.5590490997271027,
    "y": 0.08959120033041032,
    "z": -0.8242800015271949
  }, {
    "x": 0.5651620411885805,
    "y": 0.08914227624882527,
    "z": -0.8201496947415974
  }, {
    "x": 0.5590490997271027,
    "y": 0.08959120033041032,
    "z": -0.8242800015271949
  }, {
    "x": 0.6290476440394844,
    "y": 0.09393777988581577,
    "z": -0.7716701076486623
  }, {
    "x": 0.640005931617469,
    "y": 0.09285059987289761,
    "z": -0.7627392566255512
  }, {
    "x": 0.6177010877199571,
    "y": 0.09503093492932106,
    "z": -0.7806500417191052
  }, {
    "x": 0.6145377292075612,
    "y": 0.09532995080510082,
    "z": -0.7831063656106438
  }, {
    "x": 0.5982676929259253,
    "y": 0.09682945151624878,
    "z": -0.7954243049594054
  }, {
    "x": 0.5892750808591667,
    "y": 0.09763137265559187,
    "z": -0.8020118416531066
  }, {
    "x": 0.44166415770794193,
    "y": 0.325341081740321,
    "z": -0.836113600133482
  }, {
    "x": 0.45128851923028235,
    "y": 0.3267328822738734,
    "z": -0.830412124220225
  }, {
    "x": 0.48613057838229956,
    "y": 0.31996230242164553,
    "z": -0.8132042706422111
  }, {
    "x": 0.5046905038276683,
    "y": 0.3160864346487365,
    "z": -0.8033535094696634
  }, {
    "x": 0.5082998071954002,
    "y": 0.3168169976375249,
    "z": -0.8007860488376802
  }, {
    "x": 0.528519611389855,
    "y": 0.31230703769456103,
    "z": -0.7893866825471308
  }, {
    "x": 0.5595487537870014,
    "y": 0.3049038066723647,
    "z": -0.770674289704876
  }, {
    "x": 0.5606979058825174,
    "y": 0.3046179615114562,
    "z": -0.7699517880124472
  }, {
    "x": 0.5775506614494973,
    "y": 0.30032633876142745,
    "z": -0.7591042904011309
  }, {
    "x": 0.5912969556128784,
    "y": 0.2980918485024,
    "z": -0.7493391489434968
  }, {
    "x": 0.4586998536636548,
    "y": 0.32378812639993454,
    "z": -0.8274996637167663
  }
];

NOISE_DELAY = 500;

renderer = new THREE.WebGLRenderer();

renderer.setClearColor(0xffffff, 1);

camera = null;

scene = null;

mouse = null;

stats = new Stats();

stats.setMode(0);

stats.domElement.style.display = 'none';

stats.domElement.style.position = 'absolute';

stats.domElement.style.left = '0px';

stats.domElement.style.top = '0px';

document.body.appendChild(stats.domElement);

ClothLaundry = (function(_super) {
  __extends(ClothLaundry, _super);

  function ClothLaundry(point, material) {
    THREE.Object3D.call(this);
    this.cloth = new THREE.Mesh(new THREE.PlaneBufferGeometry(CLOTH_X, CLOTH_Y), material);
    this.rx = Math.random() * CLOTH_ROTATION_MAX;
    this.rz = Math.random() * CLOTH_ROTATION_MAX;
    this.cloth.position.copy(point);
    this.cloth.rotation.x = Math.random() * Math.PI;
    this.cloth.rotation.y = Math.random() * Math.PI;
    this.cloth.rotation.z = Math.random() * Math.PI;
    this.add(this.cloth);
  }

  ClothLaundry.prototype.tick = function(dt) {
    this.cloth.position.y += CLOTH_VY * dt;
    this.cloth.rotation.z += this.rx * dt;
    return this.cloth.rotation.x += this.rz * dt;
  };

  return ClothLaundry;

})(THREE.Object3D);

ClothGenerator = (function(_super) {
  __extends(ClothGenerator, _super);

  function ClothGenerator(point, time, material) {
    THREE.Object3D.call(this);
    this.point = point;
    this.time = time;
    this.material = material;
    this.cloths = [];
    this.reset();
  }

  ClothGenerator.prototype.reset = function() {
    this.elapsed = 0;
    return this.fired = false;
  };

  ClothGenerator.prototype.tick = function(dt) {
    var cloth, to_remove, _i, _j, _len, _len1, _ref, _results;
    this.elapsed += dt;
    if (!this.fired && this.elapsed >= this.time) {
      this.fired = true;
      cloth = new ClothLaundry(this.point.clone(), this.material);
      this.add(cloth);
      this.cloths.push(cloth);
    }
    to_remove = [];
    _ref = this.cloths;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      cloth = _ref[_i];
      cloth.tick(dt);
      if (cloth.cloth.position.y < Y_BOX_MIN) {
        to_remove.push(cloth);
      }
    }
    _results = [];
    for (_j = 0, _len1 = to_remove.length; _j < _len1; _j++) {
      cloth = to_remove[_j];
      this.remove(cloth);
      _results.push(this.cloths.splice(this.cloths.indexOf(cloth), 1));
    }
    return _results;
  };

  return ClothGenerator;

})(THREE.Object3D);

s = Sketch.create({
  type: Sketch.WEBGL,
  element: renderer.domElement,
  context: renderer.context,
  setup: function() {
    var i, light, noise_item, point, ray, time, url, vector, z, _i, _j, _len;
    camera = new THREE.PerspectiveCamera(75, this.width / this.height, 1, 1000000);
    scene = new THREE.Scene();
    light = new THREE.DirectionalLight(0xffffff);
    light.position.set(1, 1, 1).normalize();
    scene.add(light);
    this.clothGens = [];
    this.elapsed = 0;
    this.planes = (function() {
      var _i, _results;
      _results = [];
      for (i = _i = 0; 0 <= Z_PLANES ? _i <= Z_PLANES : _i >= Z_PLANES; i = 0 <= Z_PLANES ? ++_i : --_i) {
        z = i * Z_PLANE_INCREMENT + Z_PLANE_MIN_DEPTH;
        _results.push(new THREE.Plane(new THREE.Vector3(0, 0, 1), z));
      }
      return _results;
    })();
    this.materials = (function() {
      var _i, _len, _results;
      _results = [];
      for (_i = 0, _len = CLOTHING_ASSETS.length; _i < _len; _i++) {
        url = CLOTHING_ASSETS[_i];
        _results.push((function(url) {
          var loader, material;
          material = new THREE.MeshBasicMaterial({
            transparent: true,
            side: THREE.DoubleSide
          });
          loader = new THREE.TextureLoader();
          loader.load(url, function(tex) {
            material.map = tex;
            return material.needsUpdate = true;
          });
          return material;
        })(url));
      }
      return _results;
    })();
    for (_i = 0, _len = NOISE_DATA.length; _i < _len; _i++) {
      noise_item = NOISE_DATA[_i];
      vector = new THREE.Vector3(noise_item.x, noise_item.y, noise_item.z);
      ray = new THREE.Ray(camera.position, vector);
      point = ray.intersectPlane(this.planes[Math.floor(Math.random() * this.planes.length)]);
      time = NOISE_DELAY - (Y_BOX_MAX - point.y) * 0.1 + NOISE_DELAY;
      point.y = Y_BOX_MAX;
      this.generateClothGen(point, time);
    }
    for (i = _j = 0; 0 <= RANDOM_CLOTH_DENSITY ? _j <= RANDOM_CLOTH_DENSITY : _j >= RANDOM_CLOTH_DENSITY; i = 0 <= RANDOM_CLOTH_DENSITY ? ++_j : --_j) {
      vector = new THREE.Vector3(Math.random() * 2 - 1, Math.random() * 2 - 1, -Math.random());
      ray = new THREE.Ray(camera.position, vector);
      point = ray.at(Math.random() * Z_BOX_MIN / 2 + Z_BOX_MIN);
      time = (Y_BOX_MAX - point.y) * 0.1;
      point.y = Y_BOX_MAX;
      this.generateClothGen(point, time);
    }
    return this.max_t = _.max(this.clothGens, function(c) {
      return c.time;
    }).time;
  },
  generateClothGen: function(point, time) {
    var clothGen, material;
    material = this.materials[Math.floor(Math.random() * this.materials.length)];
    clothGen = new ClothGenerator(point, time, material);
    scene.add(clothGen);
    return this.clothGens.push(clothGen);
  },
  resize: function() {
    camera.aspect = this.width / this.height;
    camera.updateProjectionMatrix();
    return renderer.setSize(this.width, this.height);
  },
  update: function() {
    var clothGen, norm_dt, _i, _j, _len, _len1, _ref, _ref1;
    norm_dt = this.dt * FPS / 1000;
    _ref = this.clothGens;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      clothGen = _ref[_i];
      clothGen.tick(norm_dt);
    }
    this.elapsed += norm_dt;
    if (this.elapsed >= this.max_t) {
      this.elapsed = 0;
      _ref1 = this.clothGens;
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        clothGen = _ref1[_j];
        clothGen.reset();
      }
    }
    return TWEEN.update();
  },
  draw: function() {
    stats.begin();
    renderer.render(scene, camera);
    return stats.end();
  },
  keydown: function(e) {
    if (e.which === 83) {
      return stats.domElement.style.display = 'inherit';
    }
  },
  mousemove: function(e) {
    var mouse3D;
    mouse3D = new THREE.Vector3(((e.clientX / this.width) * 2 - 1) * 500, (-(e.clientY / this.height) * 2 + 1) * 500, -0.5);
    camera.position.copy(mouse3D);
    return camera.lookAt(new THREE.Vector3(0, 0, -10000));
  }
});
;
//# sourceMappingURL=app.js.map